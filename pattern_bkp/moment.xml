<?xml version="1.0" encoding="utf-8" standalone="yes"?>

<pattern>
	<name>Moment</name>
	<description>Skewness and kurtosis. 
	
		NOTE: Kurtosis will be added once support for multiple columns in the result will be implemented.
		NOTE: Arithmetic overflow can happen.
		NOTE: Division by zero can happen.

		The implementation is from: http://www.experts-exchange.com/Database/MS_Access/A_2529-Median-Mode-Skewness-and-Kurtosis-in-MS-Access.html

		To get at least somehow reliable estimation of skewness and kurtosis requires at least 10 samples. To get a
		usable estimate, you need hundreds of samples. Reference:
		https://www.spcforexcel.com/knowledge/basic-statistics/are-skewness-and-kurtosis-useful-statistics

		Note: Clipping of the data could be detected with a ratio of extreme values (a range close to min/max)
		to the count of values in another pattern.
	</description>
	<example>
		Skewness can be a sign of data truncation. For example, balance withdrawn from an ATM can be skewed
		because of too low limit on the credit card.
	</example>
	<author>Jan Motl</author>
	<date>2014-12-22</date>
	<code compatibility="MySQL,Microsoft SQL Server,Oracle,PostgreSQL">SELECT @base
	           , (Sum(power(t1.@numericalColumn-z."TheAvg", 3))/Count(t1.@numericalColumn)) / power(Sum(power(t1.@numericalColumn-z."TheAvg", 2))/Count(t1.@numericalColumn), 1.5) AS @columnName
		   FROM @propagatedTable t1,
		   (SELECT Avg(@numericalColumn) "TheAvg"
			    FROM @propagatedTable) z
		   GROUP BY @base
		   HAVING Count(t1.@numericalColumn) > 0
	</code>
	<cardinality>n</cardinality>
</pattern>
