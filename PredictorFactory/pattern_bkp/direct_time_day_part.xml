<?xml version="1.0" encoding="utf-8" standalone="yes"?>

<pattern>
	<name>Day part</name>
	<description>
		Identify, whether it's working hour, morning, evening or night.
	</description>
	<author>Jan Motl</author>
	<date>2015-06-01</date>
	<code compatibility="PostgreSQL">SELECT @baseId
			     , @baseDate
			     , @baseTarget
			     , CASE WHEN hour &lt; 5 THEN 'night' 
						WHEN hour &lt; 9 THEN 'morning' 
						WHEN hour &lt; 18 THEN 'working' 
						WHEN hour &lt; 21 THEN 'evening'
						ELSE 'night'
					END AS "@columnName"
			FROM (
				SELECT @baseId
			     	, @baseDate
			     	, @baseTarget
					, EXTRACT(HOUR FROM @timeColumn) AS hour
				FROM @propagatedTable
			) t
	</code>
	<cardinality>1</cardinality>
</pattern>