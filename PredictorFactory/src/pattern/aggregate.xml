<?xml version="1.0" encoding="utf-8" standalone="yes"?>

<pattern>
	<name>Aggregate</name>
	<description>
		Apply aggregation function on numerical attributes. Following aggregate functions were selected for being 
		supported in many databases: avg, min, max and stddev_samp.
		
		Note that "stddev_samp" is automatically translate to the database specific command for sample standard
		deviation (for example, MS SQL is using "stddev" while Oracle is using "stddev_samp"). Hence if you want
		sample standard deviation, use "stddev_samp" keyword, even if you are using MS SQL, to make the script 
		transferable.
		
		Note that "count" attribute is not in the set as it is enough to calculate the count only once per table 
		(see num_children). But aggregate functions are calculated per each numerical column. 
		
		The count of missing values is calculated in a separate pattern as it can be calculated on any data column, not
		only on numerical columns. 		
	</description>
	<author>Jan Motl</author>
	<date>2014-10-14</date>
	<code>SELECT @baseId
			   , @baseDate
			   , @baseTarget
			   , @aggregateFunction(@numericalColumn) "@columnName"
	      FROM @propagatedTable
	      GROUP BY @baseId, @baseDate, @baseTarget
	</code>
    <parameter key="@aggregateFunction" value="stddev_samp, avg, min, max"/>
	<cardinality>n</cardinality>
</pattern>
